@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

/* Basic styling for the chat interface. The colour palette loosely follows the dark blue and orange theme from NubaCom. */
:root {
  --font-primary: 'Inter', 'Google Sans', 'Product Sans', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
  --composer-border: #e5e7eb;
  --composer-bg: #ffffff;
  --composer-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
  --composer-text: #0f172a;
  --composer-muted: #6b7280;
  --accent-dark: #0d274d;
  --surface-muted: #f5f7fa;
}

@media (max-width: 600px) {
  .composer-menu {
    min-width: 200px;
  }

  .composer-submenu {
    position: static;
    margin-top: 8px;
    left: auto;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
  }
}
html,
body {
  /* Ensure the root elements occupy the full viewport.  Using both
     height:100% and min-height:100vh prevents the page from growing
     taller than the screen while still filling the available space. */
  height: 100%;
  min-height: 100vh;
  margin: 0;
  padding: 0;
}

body {
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow: hidden;
  font-family: var(--font-primary);
  background-color: #e5e9f0;
  color: #0d274d;
}

/* Application container */
/* Root app container fills the viewport */
/* The root application container fills the viewport and prevents
   unwanted page scrolling.  A flex layout allows the sidebar and
   main area to sit side‑by‑side without pushing the page height. */
.app {
  display: flex;
  flex: 1 1 auto;
  width: 100%;
  min-height: 0;
  overflow: hidden;
}

/* Sidebar styles */
.sidebar {
  width: 260px;
  background-color: #02040a;
  color: #fff;
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease, transform 0.3s ease;
  overflow-y: auto;
  height: 100%;
}

.sidebar.collapsed {
  width: 0;
  overflow: hidden;
}

.sidebar-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.nuba-logo {
  max-width: 100%;
  height: 40px;
  margin-bottom: 12px;
}

.new-chat {
  background-color: #ec472c;
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
  width: 100%;
}

.new-chat:hover {
  background-color: #c63b23;
}

/* Conversation list styles */
.conversation-list {
  list-style: none;
  padding: 0;
  margin: 0;
  flex: 1;
  overflow-y: auto;
}

.conversation-list li {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  cursor: pointer;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.conversation-list li.active {
  background-color: rgba(255, 255, 255, 0.1);
}

.conversation-list li:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

/* Delete conversation button */
.delete-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
}

.delete-btn img {
  width: 16px;
  height: 16px;
  filter: invert(1);
}

.sidebar-footer {
  padding: 12px 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.user-info {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 40px;
  font-size: 24px;
}

/* Main area styles */
/* Main area takes remaining space, arranges its children vertically and prevents external scroll */
/* The main area holds the header and chat container.  By using
   flexbox and min-height:0 we ensure the chat container can grow
   and shrink without causing the page to scroll vertically. */
.main-area {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  width: 100%;
  min-height: 0;
  background-color: #f8fafc;
  overflow: hidden;
}

.main-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  border-bottom: 1px solid #e2e8f0;
  background-color: #ffffff;
  /* Allow the elements inside to shrink naturally without forcing
     space between them.  The title will center via flex-grow on
     larger screens if desired. */
  justify-content: flex-start;
}

.toggle-sidebar {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: #0d274d;
}

.main-title {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  font-size: 18px;
  font-weight: 500;
  margin: 0;
  color: #0d274d;
}

/* Avatar displayed in the top chat header next to the title */
.chat-header-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
}

/* Greeting section */
.greeting {
  /* Allow the greeting section to fill available space and center its content */
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px;
  text-align: center;
  color: #0d274d;
}

.greeting-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  margin-bottom: 16px;
}

.suggestions {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 24px;
}

.suggestion {
  background-color: #ffffff;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 12px 16px;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
  max-width: 220px;
  color: #0d274d;
}

.suggestion:hover {
  background-color: #f1f5f9;
}

/* Hide chat until conversation */
.hidden {
  display: none;
}

/* Wrapper containing avatar and chat */
.wrapper {
  display: flex;
  gap: 16px;
  padding: 24px;
  width: 100%;
  max-width: 1200px;
  box-sizing: border-box;
}

/* Left pane for assistant image */
.avatar-pane {
  flex: 0 0 200px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.assistant-img {
  width: 180px;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Chat container styling inspired by NubaCom palette */
/* Chat container fills available space and stacks its subheader, chat area and form */
/* The chat container fills the remaining space in the main area.
   It uses flexbox so the chat area can scroll while the form stays
   pinned to the bottom.  We use min-height:0 to avoid flexbox
   children overflowing their parent. */
.chat-container {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  min-height: 0;
  background-color: #ffffff;
  border: 1px solid #e2e8f0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  overflow: hidden;
}


/* Header with logo */
.chat-header {
  background-color: #0d274d; /* dark blue */
  color: #fff;
  padding: 12px 20px;
  display: flex;
  align-items: center;
}

.logo {
  font-weight: 700;
  font-size: 24px;
  line-height: 1;
}

.logo-nuba {
  color: #0d274d;
  background-color: #fff;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 2px;
}

.logo-com {
  color: #ec472c; /* orange accent */
}

/* Chat area */
/* The scrolling message area grows to fill available space and
   allows vertical scrolling of messages only.  Padding and gap
   provide separation between messages. */
.chat-area {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
}

/* Message bubbles */
/* Individual message bubbles.  Use a larger maximum width on desktop
   so messages don't run edge‑to‑edge, but still allow full width on
   smaller screens. */
.message {
  max-width: 90%;
  padding: 8px 12px;
  border-radius: 16px;
  line-height: 1.4;
  position: relative;
  word-wrap: break-word;
  white-space: pre-wrap; /* preserve line breaks in assistant replies */
}

.message.user {
  align-self: flex-end;
  background-color: #0d274d; /* dark blue */
  color: #fff;
  border-bottom-right-radius: 4px;
}

.message.assistant {
  align-self: flex-start;
  background-color: #f2f7fc; /* very light blue/gray */
  color: #0d274d;
  border-bottom-left-radius: 4px;
}

/* Typing indicator styles. When a message has the 'typing' class, it
   visually indicates that the assistant is processing. The text is
   italicised and a lighter colour to distinguish it from normal
   assistant messages. */
.message.typing {
  font-style: italic;
  color: #888;
  background-color: #f2f7fc;
}

/* Attachments display */
.attachments {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.attachment {
  max-width: 200px;
  max-height: 200px;
  border: 1px solid #ddd;
  border-radius: 4px;
  overflow: hidden;
}

.attachment img,
.attachment video {
  width: 100%;
  height: auto;
  display: block;
}

/* Message form */
/* The message form sits at the bottom of the chat container and
   does not shrink.  It respects safe areas on mobile devices. */
.message-form {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px 20px;
  background-color: #ffffff;
  border-top: 1px solid #e2e8f0;
  padding-bottom: max(16px, env(safe-area-inset-bottom, 16px));
}

.composer {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 10px 16px;
  border-radius: 999px;
  border: 1px solid var(--composer-border);
  background-color: var(--composer-bg);
  box-shadow: var(--composer-shadow);
  color: var(--composer-text);
  position: relative;
}

.composer:focus-within {
  box-shadow: 0 12px 32px rgba(15, 23, 42, 0.12);
  border-color: #d1d5db;
}

.composer-menu-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.composer-menu-button {
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: none;
  background-color: var(--surface-muted);
  color: var(--composer-text);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: 500;
  line-height: 1;
  cursor: pointer;
  transition: background-color 0.2s ease, transform 0.2s ease;
}

.composer-menu-button:hover,
.composer-menu-button:focus-visible {
  background-color: #edeff3;
}

.composer-menu-button:active {
  transform: scale(0.96);
}

.composer-menu-button:focus-visible,
.composer-action-button:focus-visible,
.composer-send-button:focus-visible,
.submenu-trigger:focus-visible,
.composer-menu-item:focus-visible,
.composer-submenu-item:focus-visible {
  outline: 2px solid #6366f1;
  outline-offset: 2px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.composer-menu {
  position: absolute;
  top: calc(100% + 12px);
  left: 0;
  background: #ffffff;
  border-radius: 18px;
  padding: 12px 0;
  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.12);
  min-width: 240px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(8px);
  transition: opacity 0.18s ease, transform 0.18s ease;
  z-index: 40;
}

.composer-menu.is-visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.composer-menu-item {
  width: 100%;
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 22px;
  font-size: 14px;
  color: var(--composer-text);
  cursor: pointer;
  text-align: left;
}

.composer-menu-item:hover {
  background-color: #f4f6fb;
}

.menu-icon {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background-color: #eef2ff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--composer-text);
  position: relative;
}

.menu-icon.clip {
  background: #eef2ff url('icons/paperclip.png') center/14px 14px no-repeat;
}

.menu-icon.library::before,
.menu-icon.library::after {
  content: '';
  position: absolute;
  background-color: currentColor;
}

.menu-icon.library::before {
  width: 14px;
  height: 16px;
  border-radius: 2px;
  top: 5px;
  left: 6px;
  opacity: 0.88;
}

.menu-icon.library::after {
  width: 12px;
  height: 2px;
  top: 9px;
  left: 7px;
  border-radius: 999px;
  opacity: 0.6;
}

.menu-icon.model {
  background-color: #dbeafe;
}

.menu-icon.model::before {
  content: '';
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: #2563eb;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.has-submenu {
  position: relative;
}

.submenu-trigger {
  width: 100%;
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0;
  font-size: 14px;
  color: inherit;
  cursor: pointer;
}

.submenu-trigger .submenu-arrow {
  margin-left: auto;
  font-size: 18px;
  color: var(--composer-muted);
}

.model-chip {
  margin-left: auto;
  margin-right: 8px;
  padding: 2px 10px;
  border-radius: 999px;
  background-color: #eef2ff;
  color: #4338ca;
  font-size: 12px;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 72px;
  max-width: 140px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.model-chip:empty::before {
  content: '—';
  color: var(--composer-muted);
}

.composer-submenu {
  position: absolute;
  top: -12px;
  left: calc(100% + 12px);
  min-width: 220px;
  background: #ffffff;
  border-radius: 18px;
  padding: 12px 0;
  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.12);
  opacity: 0;
  visibility: hidden;
  transform: translateY(8px);
  transition: opacity 0.18s ease, transform 0.18s ease;
  z-index: 45;
}

.has-submenu.open .composer-submenu {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.composer-submenu-item {
  width: 100%;
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 22px;
  font-size: 14px;
  color: var(--composer-text);
  cursor: pointer;
  text-align: left;
}

.composer-submenu-item:hover {
  background-color: #f4f6fb;
}

.composer-submenu-item.is-active {
  background-color: #eef2ff;
  color: #1e3a8a;
}

.composer-submenu-empty {
  padding: 12px 22px;
  font-size: 13px;
  color: var(--composer-muted);
}

.composer input[type="text"] {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 16px;
  color: var(--composer-text);
  min-width: 0;
}

.composer input[type="text"]::placeholder {
  color: var(--composer-muted);
}

.composer input[type="text"]:focus {
  outline: none;
}

.composer-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.composer-action-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background-color: var(--surface-muted);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.composer-action-button:hover {
  background-color: #edeff3;
}

.composer-action-button img {
  width: 18px;
  height: 18px;
  filter: brightness(0) saturate(100%) invert(18%) sepia(17%) saturate(596%) hue-rotate(182deg) brightness(90%) contrast(86%);
}

.composer-send-button {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: none;
  background-color: #111827;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.2s ease, transform 0.2s ease;
}

.composer-send-button:hover {
  background-color: #000000;
  transform: translateY(-1px);
}

.composer-send-button .icon-arrow {
  position: relative;
  width: 14px;
  height: 14px;
  display: block;
}

.composer-send-button .icon-arrow::before {
  content: '';
  position: absolute;
  bottom: 2px;
  left: 50%;
  width: 2px;
  height: 8px;
  background-color: #ffffff;
  transform: translateX(-50%);
  border-radius: 999px;
}

.composer-send-button .icon-arrow::after {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-bottom: 6px solid #ffffff;
}

.model-select {
  display: none;
}

/* Responsive adjustments for mobile screens */
@media (max-width: 768px) {
  /* App container repositioning */
  .app {
    position: relative;
    min-height: 100dvh;
    flex-direction: column;
  }

  /* Sidebar becomes overlay */
  .sidebar {
    position: fixed;
    inset: 0 auto 0 0; /* top:0; left:0; bottom:0 */
    height: 100dvh;
    width: 82vw;
    max-width: 320px;
    transform: translateX(-100%);
    z-index: 1000;
  }

  .sidebar.open {
    transform: translateX(0);
  }

  /* Ignore collapsed width in mobile */
  .sidebar.collapsed {
    width: 82vw;
  }

  /* Backdrop for overlay (requires <div id="mobile-backdrop" class="backdrop"></div> in HTML) */
  .backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.35);
    z-index: 900;
    display: none;
  }

  .backdrop.show {
    display: block;
  }

  /* Main area occupies full width */
  .main-area {
    width: 100%;
    margin-left: 0;
    min-height: 100dvh;
  }

  /* Chat container full width on mobile */
  .chat-container {
    max-width: none;
    width: 100%;
    border: none;
    box-shadow: none;
    margin: 0;
    border-radius: 0;
    padding: 0;
  }

  .main-header {
    position: sticky;
    top: 0;
    padding: 16px;
    background: #ffffff;
    z-index: 600;
  }

  .chat-header-avatar {
    display: none;
  }

  .main-title {
    justify-content: flex-start;
    font-size: 20px;
    text-align: left;
  }

  /* Suggestions in a single column */
  .suggestions {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    width: 100%;
    padding: 0 16px;
  }

  .greeting {
    align-items: flex-start;
    text-align: left;
    padding: 32px 20px;
    gap: 24px;
  }

  .greeting-avatar {
    display: none;
  }

  .suggestion {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    text-align: left;
  }

  /* Let flexbox handle chat area height on mobile. It will fill available space */
  .chat-container {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
  }

  /* Chat area grows to fill remaining space */
  .chat-area {
    flex: 1 1 auto;
    height: auto;
  }

  /* The message form retains the compact pill layout on mobile. */
  .message-form {
    padding: 14px 16px;
  }

  /* Show toggle icon always on mobile */
  .toggle-sidebar {
    display: block;
    font-size: 22px;
  }

  /* Adjust sizes for conversation list and inputs */
  .conversation-list li {
    font-size: 14px;
  }

  .chat-area {
    padding: 12px;
    padding-bottom: 20px;
  }

  .composer {
    gap: 12px;
    padding: 10px 14px;
  }

  .composer input[type="text"] {
    font-size: 15px;
  }

  .composer-menu-button,
  .composer-action-button {
    width: 38px;
    height: 38px;
  }

  .composer-send-button {
    width: 42px;
    height: 42px;
  }

  .composer-actions {
    gap: 10px;
  }

  .model-chip {
    display: none;
  }

  /* Allow message bubbles to use more width on small screens */
  .message {
    max-width: 100%;
    font-size: 15px;
  }

  .model-select {
    font-size: 14px;
    margin-left: 0;
  }
}
